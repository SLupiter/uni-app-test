(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/maincontent/bookexchange/bookexchange"],{"188c":function(t,e,a){"use strict";a("e497");var i=n(a("b0ce")),s=n(a("55e3"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},"2a37":function(t,e,a){},"32eb":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("2f62"),s=o(a("e31c")),n=o(a("7573"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){c(t,e,a[e])})}return t}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l={components:{uniDrawer:s.default,uniIcon:n.default},data:function(){return{rightDrawerVisible:!1,listData:[],nextPage:"",page:1,reLoad:!0,searchData:{},getting:!1}},computed:r({},(0,i.mapState)(["isLogin"])),methods:{bindClick:function(e){console.log(e);var a=e.mp.currentTarget.dataset.bname,i=e.mp.currentTarget.dataset.bowner,s=e.mp.currentTarget.dataset.bid;this.isLogin?t.navigateTo({url:"./post?bname="+a+"&bowner="+i+"bid="+s,success:function(t){},fail:function(){},complete:function(){}}):t.navigateTo({url:"../../user/login/login",success:function(t){},fail:function(){},complete:function(){}})},gouser:function(){t.navigateTo({url:"../../user/pwd/pwd",success:function(t){},fail:function(){},complete:function(){}})},dislike:function(e){var a=this;t.showModal({content:"不感兴趣？",success:function(t){t.confirm&&a.listData.splice(e,1)}})},formSubmit:function(t){this.reLoad=!0;var e=t.detail.value;for(var a in"true"==e.status?e.status=!0:e.status=!1,e)this.$set(this.searchData,a,e[a]);console.log(t),console.log(this.searchData.status+this.searchData.country),this.getList()},formReset:function(t){console.log("清空数据"),this.chosen=""},closeRightDrawer:function(){this.chosen="",this.rightDrawerVisible=!1},getList:function(){var e=this;if(!this.getting){this.getting=!0;var a="https://api.thinker.ink/v1/books/";this.reLoad||(a=this.nextPage,""!=a)?(console.log(a),t.showToast({icon:"loading"}),t.request({url:a,method:"GET",data:this.searchData,success:function(a){console.log(a.data.count),0==a.data.count&&t.showToast({title:"没有数据",mask:!1,duration:1500}),console.log(a),e.reLoad?e.listData=a.data.data:a.data.data.forEach(function(t){e.listData=e.listData.concat(a.data.data),console.log(e.listData)}),e.nextPage=a.data.next,e.reLoad=!1,console.log(e.nextPage),console.log(e.listData[0].images[0])},fail:function(){},complete:function(){}}),this.getting=!1,this.searchData={}):t.showToast({icon:"none",title:"无更多数据",mask:!1,duration:1500})}},confirm:function(e){this.reLoad=!0,this.searchData.search=e.detail.value,console.log(this.searchData),t.showToast({icon:"loading",title:"搜索"}),this.getList()}},onNavigationBarButtonTap:function(t){switch(console.log("tab顶部键"+t.index),t.index){case 2:console.log("点了评分"),this.searchData.ordering="level",this.getList();break;case 1:console.log("点了距离"),this.searchData.ordering="place",this.getList();break;case 0:this.rightDrawerVisible=!this.rightDrawerVisible;break;default:break}},onBackPress:function(){if(this.rightDrawerVisible)return this.rightDrawerVisible=!1,!0},onLoad:function(){this.getList()},onReachBottom:function(){this.reLoad=!1,this.getList(),console.log("bottom")},onPullDownRefresh:function(){this.reLoad=!0,this.getList(),t.stopPullDownRefresh()}};e.default=l}).call(this,a("649d")["default"])},"45ea":function(t,e,a){"use strict";a.r(e);var i=a("32eb"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=s.a},"55e3":function(t,e,a){"use strict";a.r(e);var i=a("d204"),s=a("45ea");for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);a("6b1c");var o=a("2877"),r=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,null,null);r.options.__file="bookexchange.vue",e["default"]=r.exports},"6b1c":function(t,e,a){"use strict";var i=a("2a37"),s=a.n(i);s.a},d204:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"header"},[a("view",{staticClass:"input-view",attrs:{fixed:"true"}},[a("uni-icon",{attrs:{type:"search",size:"22",color:"#666666",mpcomid:"684237fc-0"}}),a("input",{staticClass:"input",attrs:{"confirm-type":"search",type:"text",placeholder:"输入搜索关键词",eventid:"684237fc-0"},on:{confirm:t.confirm}})],1)]),t._l(t.listData,function(e,i){return a("view",{key:i,staticClass:"list-cell",attrs:{"hover-class":"uni-list-cell-hover","data-bname":e.name,"data-bowner":e.nickname,"data-bid":e.bid,eventid:"684237fc-3-"+i},on:{click:t.bindClick}},[a("view",{staticClass:"media-list"},[a("view",{staticClass:"media-image-left"},[a("text",{staticClass:"media-title media-title2 name",attrs:{eventid:"684237fc-1-"+i},on:{tap:t.gouser}},[t._v(t._s(e.nickname))]),a("text",{staticClass:"media-title media-title2"},[t._v(t._s(e.name))]),t._m(0,!0)]),a("view",{staticClass:"media-foot"},[a("view",{staticClass:"media-info"},[a("text",{staticClass:"info-text"},[t._v(t._s(e.level))]),a("text",{staticClass:"info-text"},[t._v(t._s(e.language))]),a("text",{staticClass:"info-text"},[t._v(t._s(e.country))]),a("text",{staticClass:"info-text"},[t._v(t._s(e.types))]),a("text",{staticClass:"info-text"},[t._v(t._s(e.place))]),a("text",{staticClass:"info-text"},[t._v(t._s(e.status?"已交换":"未交换"))])]),a("view",{staticClass:"max-close-view",attrs:{eventid:"684237fc-2-"+i},on:{click:function(e){t.dislike(i)}}},[t._m(1,!0)])])])])}),a("uni-drawer",{attrs:{visible:t.rightDrawerVisible,mode:"right",eventid:"684237fc-6",mpcomid:"684237fc-6"},on:{close:t.closeRightDrawer}},[a("view",{staticClass:"uni-padding-wrap"},[a("form",{attrs:{eventid:"684237fc-5"},on:{submit:t.formSubmit,reset:t.formReset}},[a("view",[a("view",{staticClass:"uni-title"},[t._v("状态")]),a("radio-group",{staticClass:"uni-flex",attrs:{name:"status",mpcomid:"684237fc-1"}},[a("label",[a("radio",{attrs:{value:"true"}}),t._v("已交换")],1),a("label",[a("radio",{attrs:{value:"false"}}),t._v("未交换")],1)],1)],1),a("view",[a("view",{staticClass:"uni-title"},[t._v("地点")]),a("radio-group",{staticClass:"uni-column",attrs:{name:"place",mpcomid:"684237fc-2"}},[a("view",{staticClass:"uni-flex"},[a("label",[a("radio",{attrs:{value:"1"}}),t._v("信部")],1),a("label",[a("radio",{attrs:{value:"2"}}),t._v("文理学部")],1)],1),a("view",{staticClass:" uni-flex"},[a("label",[a("radio",{attrs:{value:"3"}}),t._v("工部")],1),a("label",[a("radio",{attrs:{value:"4"}}),t._v("医学部")],1)],1)])],1),a("view",[a("view",{staticClass:"uni-title"},[t._v("国家")]),a("radio-group",{staticClass:"uni-flex",attrs:{name:"country",mpcomid:"684237fc-3"}},[a("label",[a("radio",{attrs:{value:"in"}}),t._v("国内")],1),a("label",[a("radio",{attrs:{value:"out"}}),t._v("国外")],1)],1)],1),a("view",[a("view",{staticClass:"uni-title"},[t._v("语言")]),a("radio-group",{staticClass:"uni-flex",attrs:{name:"language",mpcomid:"684237fc-4"}},[a("label",[a("radio",{attrs:{value:"ch"}}),t._v("中文")],1),a("label",[a("radio",{attrs:{value:"en"}}),t._v("英文")],1)],1)],1),a("view",[a("view",{staticClass:"uni-title"},[t._v("类型")]),a("radio-group",{staticClass:"uni-flex",attrs:{name:"types",mpcomid:"684237fc-5"}},[a("label",[a("radio",{attrs:{value:"1"}}),t._v("教辅")],1),a("label",[a("radio",{attrs:{value:"2"}}),t._v("课外")],1)],1)],1),a("view",{staticClass:"uni-btn-v uni-common-mt"},[a("button",{staticClass:"btn-submit ",attrs:{size:"mini",formType:"submit",type:"primary",eventid:"684237fc-4"},on:{tap:t.closeRightDrawer}},[t._v("Submit")])],1),a("view",{staticClass:"uni-btn-v uni-common-mt"},[a("button",{attrs:{type:"warn",size:"mini",formType:"reset"}},[t._v("Reset")])],1)])],1)])],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"image-section image-section-left"},[a("image",{staticClass:"image-list1 image-list2",attrs:{src:"../../../static/book_real.jpg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"close-view"},[a("text",{staticClass:"close"},[t._v("×")])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})}},[["188c","common/runtime","common/vendor"]]]);